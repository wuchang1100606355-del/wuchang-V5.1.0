# Odoo POS 產品屬性完整配置報告

## 📋 配置需求

**配置時間：** 2026-01-20

### 主要需求

1. **根據主商品代碼設定屬性**
   - 以主商品代碼（03913341-03913353）找對應的組合
   - 將配置項目寫入 Odoo 產品屬性
   - 根據屬性價格設定屬性加價
   - **不產生變體**

2. **特殊處理**
   - 咖啡豆中肯亞AA的屬性使用耶加雪夫屬性
   - 聊國簡餐中所有產品屬性改為：紅茶0、綠茶0、其他飲品-20元
   - 飲品中如有項目基準價非中杯的，依價格邏輯改為中杯為基準

---

## 🔍 發現的產品

### 肯亞AA產品
- **ID 64:** 肯亞AA (價格: 110.00)
- **ID 91:** 肯亞AA (價格: 445.00)
- **ID 100:** 肯亞AA (價格: 110.00)
- **ID 107:** 肯亞AA (價格: 445.00)

### 耶加雪夫產品
- **ID 38:** 耶加雪夫 (代碼: QC_P_39095604, 價格: 110.00)
- **ID 85:** 耶加雪夫 (代碼: QC_P_39095624, 價格: 445.00)
- **ID 93:** 耶加雪夫濾掛 (代碼: QC_P_39095630, 價格: 400.00)

### 聊國簡餐產品
- **ID 1:** Tips/小費 (代碼: TIPS, 價格: 1.00)
- **ID 108:** Discount/折扣 (代碼: DISC, 價格: 0.00)

---

## 📊 選項配置對應表

### 題型代碼對應組合

| 題型代碼 | 組合名稱 | 屬性類別 | 選項數量 |
|---------|---------|---------|---------|
| 03913341 | S/M15/L45+溫度+甜度 | 尺寸、溫度、甜度 | 12 |
| 03913342 | S/M20/L50+溫度+甜度 | 尺寸、溫度、甜度 | 12 |
| 03913343 | 拿鐵咖啡 | 產品 | 1 |
| 03913344 | S/M20/L55+溫度+甜度 | 尺寸、溫度、甜度 | 12 |
| 03913345 | S/M25/L65+溫度+甜度 | 尺寸、溫度、甜度 | 12 |
| 03913346 | M/L5+溫度+甜度 | 尺寸、溫度、甜度 | 11 |
| 03913347 | M/L10+溫度+甜度 | 尺寸、溫度、甜度 | 11 |
| 03913348 | M/L15+溫度+甜度 | 尺寸、溫度、甜度 | 11 |
| 03913349 | 果醬口味 | 口味選擇 | 4 |
| 03913350 | 甜度 | 甜度 | 4 |
| 03913351 | 加口味10 | 加口味 | 5 |
| 03913352 | 加口味15 | 加口味 | 6 |
| 03913353 | 加口味20 | 加口味 | 6 |

---

## ⚙️ 配置步驟

### 步驟 1: 建立產品屬性

需要建立的屬性（create_variant = 'no_variant'）：

1. **尺寸**
   - S (加價: 0元)
   - M (加價: 15/20/25元，依題型代碼)
   - L (加價: 5/10/15/45/50/55/65元，依題型代碼)

2. **溫度**
   - 去冰 (加價: 0元)
   - 少冰 (加價: 0元)
   - 正常冰 (加價: 0元)
   - 溫 (加價: 0元)
   - 熱 (加價: 0元)

3. **甜度**
   - 無糖 (加價: 0元)
   - 正常糖 (加價: 0元)
   - 少糖 (加價: 0元)
   - 半糖 (加價: 0元)

4. **加口味**
   - 焦糖 (加價: 10/15/20元)
   - 香草 (加價: 10/15/20元)
   - 愛爾蘭 (加價: 10/15/20元)
   - 榛果 (加價: 10/15/20元)
   - 黑糖 (加價: 10/15/20元)
   - 交錯 (加價: 15/20元)

5. **口味選擇**
   - 花生 (加價: 0元)
   - 巧克力 (加價: 0元)
   - 奶油 (加價: 0元)
   - 辣味 (加價: 0元)

### 步驟 2: 特殊處理

#### 2.1 肯亞AA使用耶加雪夫屬性

**處理方式：**
1. 查找耶加雪夫產品（ID: 38, 85, 93）的屬性配置
2. 將相同的屬性連結到肯亞AA產品（ID: 64, 91, 100, 107）

**執行方式：**
- 通過 Odoo 介面：複製耶加雪夫的屬性到肯亞AA
- 或通過 SQL：複製 `product_template_attribute_line` 記錄

#### 2.2 聊國簡餐屬性配置

**處理方式：**
1. 建立「飲品選擇」屬性（create_variant = 'no_variant'）
2. 新增三個屬性值：
   - 紅茶 (加價: 0元)
   - 綠茶 (加價: 0元)
   - 其他飲品 (加價: -20元)
3. 將屬性連結到聊國簡餐分類的所有產品

**注意：** 目前找到的聊國簡餐產品是「小費」和「折扣」，可能需要查找其他產品。

#### 2.3 飲品基準價調整

**處理方式：**
1. 識別飲品產品（可能需要根據分類或名稱）
2. 檢查基準價是否為中杯價格
3. 如果不是中杯，調整基準價為中杯
4. 其他尺寸（小杯、大杯）作為屬性加價處理

**價格邏輯：**
- 如果基準價是小杯，調整為中杯價格，小杯作為 -X 元屬性
- 如果基準價是大杯，調整為中杯價格，大杯作為 +X 元屬性

---

## 📝 SQL 配置腳本

已產生 `configure_pos_attributes.sql`，包含：
- 建立產品屬性
- 建立屬性值
- 設定加價

**注意：** SQL 腳本需要根據實際產品 ID 進行調整。

---

## 🔧 執行方式

### 方式 1: 通過 Odoo 網頁介面（推薦）

1. **建立屬性**
   - 登入：http://localhost:8069
   - 前往：銷售點 > 配置 > 產品屬性
   - 建立屬性並設定「不建立變體」

2. **建立屬性值**
   - 為每個屬性新增屬性值
   - 設定加價金額

3. **連結到產品**
   - 前往：銷售點 > 產品 > 產品
   - 編輯產品，新增屬性
   - 選擇對應的屬性值

4. **特殊處理**
   - 肯亞AA：複製耶加雪夫的屬性
   - 聊國簡餐：新增「飲品選擇」屬性
   - 飲品基準價：調整為中杯價格

### 方式 2: 通過 Odoo XML-RPC API

使用 Python 腳本通過 Odoo API 自動化配置。

### 方式 3: 直接 SQL（需謹慎）

使用產生的 SQL 腳本，但需要：
- 先備份資料庫
- 確認產品 ID
- 測試後再執行

---

## ⚠️ 重要注意事項

1. **不產生變體**
   - 所有屬性必須設定 `create_variant = 'no_variant'`
   - 這是關鍵要求

2. **屬性加價**
   - 屬性價格作為加價使用
   - 不影響產品基準價

3. **基準價調整**
   - 飲品基準價需調整為中杯
   - 其他尺寸作為屬性加價

4. **資料備份**
   - 執行前務必備份資料庫
   - 建議先測試環境驗證

---

## 📁 相關檔案

- `configure_pos_attributes.sql` - SQL 配置腳本
- `POS_ATTRIBUTES_CONFIGURATION_PLAN.md` - 配置計劃
- `POS_ATTRIBUTES_IMPLEMENTATION_GUIDE.md` - 實作指南
- `pos_options_merged.json` - 合併後的選項資料
- `configure_odoo_pos_attributes_complete.py` - 配置腳本

---

## ✅ 總結

**配置狀態：** 📋 計劃已產生

**下一步：**
1. 查看配置計劃和實作指南
2. 備份資料庫
3. 通過 Odoo 介面或 API 執行配置
4. 驗證配置結果

---

**報告產生時間：** 2026-01-20
