# 備份改為雲端儲存說明

## 更新日期
2026-01-21

## 更新內容

### 變更前
- 備份檔案先在本機創建，然後複製到雲端
- 本機保留備份檔案的副本
- 佔用本機磁碟空間

### 變更後
- ✅ **備份直接寫入雲端**：所有備份操作直接寫入五常雲端空間
- ✅ **本機不保留副本**：備份完成後，本機不保留任何備份檔案
- ✅ **節省本機空間**：釋放本機磁碟空間
- ✅ **統一管理**：所有備份統一管理於雲端

## 更新的腳本

### 1. `backup_to_gdrive.py`
**變更：**
- 備份操作直接從源檔案寫入雲端
- 不經過本機臨時目錄
- 備份完成後，本機不保留副本

**使用方式：**
```bash
python backup_to_gdrive.py
```

**備份內容：**
- 資料庫備份 → `五常雲端空間/database/backups/`
- 上傳檔案 → `五常雲端空間/uploads/`
- 配置檔案 → `五常雲端空間/config/`

### 2. `backup_media_to_dropbox.py`
**變更：**
- ZIP 壓縮檔直接寫入雲端（五常雲端空間）
- 不再使用 Dropbox，改為使用五常雲端空間
- 本機不保留 ZIP 檔案副本

**使用方式：**
```bash
python backup_media_to_dropbox.py
```

**備份位置：**
- 媒體檔案 ZIP → `五常雲端空間/backups/媒體檔案備份/`

## 備份策略

### 原則
1. **直接寫入雲端**：所有備份操作直接寫入五常雲端空間
2. **不保留本機副本**：備份完成後，本機不保留任何備份檔案
3. **時間戳記命名**：備份檔案使用時間戳記命名，避免覆蓋
4. **統一管理**：所有備份統一管理於五常雲端空間

### 備份目錄結構

```
五常雲端空間/
├── database/
│   └── backups/          # 資料庫備份（時間戳記）
├── uploads/               # 上傳檔案備份（時間戳記）
├── config/                # 配置檔案備份（時間戳記）
└── backups/
    └── 媒體檔案備份/      # 媒體檔案 ZIP（時間戳記）
```

## 注意事項

1. ⚠️ **備份僅存雲端**：所有備份檔案僅存於雲端，本機不保留副本
2. ⚠️ **需要網路連線**：備份操作需要網路連線到 Google Drive
3. ⚠️ **Google Drive 同步**：確保 Google Drive 桌面應用程式已安裝並正常同步
4. ⚠️ **恢復備份**：如需恢復備份，請從雲端下載

## 優勢

1. **節省空間**：釋放本機磁碟空間
2. **統一管理**：所有備份統一管理於雲端
3. **自動同步**：Google Drive 自動同步到所有設備
4. **版本控制**：Google Drive 提供版本控制功能
5. **安全可靠**：雲端備份更安全可靠

## 恢復備份

如需恢復備份：

1. **從雲端下載**：使用 Google Drive 桌面應用程式或網頁下載
2. **解壓縮**：如果是 ZIP 檔案，解壓縮後使用
3. **還原位置**：將備份檔案還原到原始位置

## 相關文檔

- `CLOUD_SYNC_CONFIG.md` - 雲端同步配置說明
- `SYNC_MODE_UPDATE.md` - 同步模式更新總結
