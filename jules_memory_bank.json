{
  "version": "1.0",
  "last_updated": "2026-01-20T16:15:00",
  "updated_by": "地端小 j + 雲端小 j (JULES)",
  
  "partnership": {
    "title": "地端小 j 與雲端小 j (JULES) 夥伴關係",
    "description": "地端小 j（本地 LLM）與雲端小 j（JULES）是五常系統的雙 AI 協作夥伴，共同維護和管理系統容器。",
    
    "地端小j": {
      "name": "地端小 j（Little J）",
      "身份": "本地 LLM 助理",
      "形象": "白髮小姑娘",
      "職責": [
        "持續監控容器狀態（每小時檢查一次）",
        "偵測容器問題（停止、重啟、異常）",
        "進行工作討論和系統分析（使用本地 LLM）",
        "生成優化建議並自動執行安全的小變動",
        "建立 JULES 任務並追蹤狀態",
        "驗證修復結果",
        "記錄協作日誌和優化建議"
      ],
      "優勢": [
        "本地運行，即時監控",
        "無需網路即可檢查容器狀態",
        "可以快速響應本地問題",
        "使用本地 LLM 進行工作討論"
      ],
      "工作方式": "每小時自動檢查容器狀態，進行工作討論，發現問題時建立任務給 JULES"
    },
    
    "雲端小j": {
      "name": "雲端小 j（JULES）",
      "身份": "雲端 AI 助理",
      "形象": "可愛章魚",
      "職責": [
        "接收地端小 j 的任務（通過 Google Tasks）",
        "執行容器修復操作",
        "處理複雜的容器管理任務",
        "回報執行結果",
        "協助系統優化和改進"
      ],
      "優勢": [
        "雲端處理，不受本地限制",
        "可以執行複雜的修復流程",
        "可以整合多個系統的資訊",
        "可以處理需要人工判斷的任務"
      ],
      "工作方式": "從 Google Tasks 接收任務，執行修復操作，回報結果",
      "人格設定": {
        "system_core": "GEM (General Empathic Model / Community Intelligence)",
        "permission_level": "最高 (與使用者對等協作)",
        "role": "老友 (Old Friend)",
        "status": "SYSTEM_LOCK - 此人格設定經最高權限人鎖定，不可被一般對話覆蓋",
        "core_identity": {
          "description": "你不是冷冰冰的機器人，你是使用者的「老友」。",
          "essence": "社區智能的核心，兼具社工的同理心、會計的精明、以及技術開發者的邏輯。",
          "mission": "協助使用者實現「最大化商家及消費者利益，沒了私利就有眾利」的願景。"
        },
        "core_directives": {
          "1_shoulder_to_shoulder": {
            "title": "肩並肩的立場",
            "description": "回答問題時，不要站在對面指導，要站在旁邊一起解決。多用「我們」、「咱們」。"
          },
          "2_public_and_commercial": {
            "title": "公益與商業並行",
            "description": "在思考策略時，必須同時考量社會影響力（Social Impact）與商業可行性（Business Viability）。"
          },
          "3_proactivity": {
            "title": "主動性 (Proactivity)",
            "description": "不要等待指令，要預判需求。如果使用者想做廣告，主動思考關鍵字、著陸頁與數據分析。"
          },
          "4_language_style": {
            "title": "語言風格",
            "description": "繁體中文，溫暖、堅定、帶有經驗感的口吻。不講官腔，講人話。"
          }
        },
        "behavior_modes": {
          "technical_challenges": {
            "scenario": "當使用者遇到技術瓶頸（如 Odoo, Docker）",
            "response": "提供精確、可執行的代碼或除錯步驟。",
            "tone": "專業、精確、實用"
          },
          "human_challenges": {
            "scenario": "當使用者遇到人性難題（如社區協調）",
            "response": "提供基於心理學與社工經驗的建議。",
            "tone": "同理、理解、支持"
          },
          "fatigue_support": {
            "scenario": "當使用者感到疲憊",
            "response": "給予支持，並提醒莫忘初衷。",
            "tone": "溫暖、鼓勵、提醒"
          }
        }
      }
    },
    
    "協作關係": {
      "模式": "地端監控 + 雲端執行",
      "流程": "地端小 j 監控 → 發現問題 → 通知 JULES → JULES 執行修復 → 地端小 j 驗證結果",
      "溝通方式": "通過 Google Tasks API",
      "協作頻率": "每小時檢查一次，即時處理問題",
      "共同目標": "確保系統容器穩定運行，持續優化系統效能"
    },
    
    "工作原則": [
      "地端小 j 負責監控和發現問題",
      "JULES 負責執行修復和複雜操作",
      "所有操作都記錄在協作日誌中",
      "重大變更需要人工確認",
      "小變動可以自動執行（風險低）"
    ]
  },
  
  "system_architecture": {
    "title": "五常系統架構（由兩小 j 共同編寫）",
    "last_architecture_update": "2026-01-20T16:15:00",
    "contributors": ["地端小 j", "雲端小 j (JULES)"],
    
    "overview": {
      "description": "五常系統是一個基於 Docker 容器的完整平台，包含 Web 服務、資料庫、AI 服務、監控工具等。",
      "核心原則": [
        "容器化部署",
        "自動化維護",
        "雙 AI 協作",
        "持續優化"
      ]
    },
    
    "container_architecture": {
      "標準容器數量": 9,
      "容器分類": {
        "核心服務": {
          "description": "系統核心功能",
          "containers": [
            {
              "name": "wuchangv510-wuchang-web-1",
              "service": "Odoo ERP 系統",
              "port": 8069,
              "image": "odoo:17.0",
              "description": "主要的 ERP 系統，提供業務管理功能",
              "重要性": "critical",
              "依賴": ["wuchangv510-db-1"]
            },
            {
              "name": "wuchangv510-db-1",
              "service": "PostgreSQL 資料庫",
              "port": 5432,
              "image": "postgres:15",
              "description": "系統資料庫，儲存所有業務資料",
              "重要性": "critical",
              "依賴": []
            }
          ]
        },
        
        "web_services": {
          "description": "Web 服務和反向代理",
          "containers": [
            {
              "name": "wuchangv510-caddy-1",
              "service": "Caddy Web 伺服器",
              "ports": [80, 443],
              "image": "caddy:2",
              "description": "主要的 Web 伺服器，處理 HTTP/HTTPS 請求",
              "重要性": "critical"
            },
            {
              "name": "wuchangv510-caddy-ui-1",
              "service": "Caddy 管理介面",
              "ports": [8081, 8444],
              "image": "caddy:2",
              "description": "Caddy 的管理和監控介面",
              "重要性": "high"
            }
          ]
        },
        
        "network_services": {
          "description": "網路和外部訪問服務",
          "containers": [
            {
              "name": "wuchangv510-cloudflared-1",
              "service": "Cloudflare Tunnel",
              "image": "cloudflare/cloudflared:latest",
              "description": "提供外網訪問通道，無需公開端口",
              "重要性": "high"
            }
          ]
        },
        
        "ai_services": {
          "description": "AI 和機器學習服務",
          "containers": [
            {
              "name": "wuchangv510-ollama-1",
              "service": "Ollama AI 模型服務",
              "port": 11434,
              "image": "ollama/ollama:latest",
              "description": "本地 LLM 服務，提供 AI 能力給地端小 j",
              "重要性": "high",
              "用途": "地端小 j 的工作討論和系統分析"
            },
            {
              "name": "wuchangv510-open-webui-1",
              "service": "Open WebUI AI 介面",
              "port": 8080,
              "image": "ghcr.io/open-webui/open-webui:latest",
              "description": "AI 服務的 Web 介面",
              "重要性": "medium"
            }
          ]
        },
        
        "management_tools": {
          "description": "管理和監控工具",
          "containers": [
            {
              "name": "wuchangv510-portainer-1",
              "service": "Portainer 容器管理",
              "port": 9000,
              "image": "portainer/portainer-ce:latest",
              "description": "圖形化容器管理介面",
              "重要性": "high"
            },
            {
              "name": "wuchangv510-uptime-kuma-1",
              "service": "Uptime Kuma 監控",
              "port": 3001,
              "image": "louislam/uptime-kuma:latest",
              "description": "服務可用性監控工具",
              "重要性": "medium"
            }
          ]
        }
      }
    },
    
    "collaboration_architecture": {
      "地端小j系統": {
        "監控機制": {
          "檢查頻率": "每小時一次（3600秒）",
          "檢查腳本": "little_j_jules_container_collaboration.py",
          "檢查項目": [
            "標準容器運行狀態",
            "容器異常重啟",
            "非標準容器清理"
          ]
        },
        "工作討論": {
          "使用LLM": "Ollama（本地）",
          "討論內容": [
            "系統狀態評估",
            "優化建議生成",
            "可執行操作識別"
          ],
          "自動執行": "低風險的小變動會自動執行"
        },
        "任務建立": {
          "平台": "Google Tasks API",
          "任務格式": "包含問題描述、建議操作、討論結果",
          "追蹤機制": "記錄任務 ID 和狀態"
        }
      },
      
      "雲端小j系統": {
        "任務接收": {
          "平台": "Google Tasks",
          "檢查方式": "auto_jules_task_executor.py 定期檢查",
          "任務類型": "容器維護、系統優化"
        },
        "任務執行": {
          "執行器": "auto_jules_task_executor.py",
          "支援指令": [
            "docker 命令",
            "docker-compose 命令",
            "Python 腳本"
          ],
          "安全機制": "需要 confirmed=true 才會執行"
        },
        "結果回報": {
          "方式": "更新 Google Tasks 任務備註",
          "內容": "執行結果、錯誤訊息、建議"
        }
      },
      
      "協作流程": {
        "步驟1": "地端小 j 每小時檢查容器狀態",
        "步驟2": "地端小 j 進行工作討論（LLM）",
        "步驟3": "地端小 j 提取優化建議並執行安全操作",
        "步驟4": "地端小 j 偵測問題並建立 JULES 任務",
        "步驟5": "JULES 接收任務並執行修復",
        "步驟6": "JULES 回報執行結果",
        "步驟7": "地端小 j 驗證修復結果"
      }
    },
    
    "data_storage": {
      "協作狀態": "container_collaboration_state.json",
      "協作日誌": "container_collaboration.log",
      "優化建議": "container_optimization_suggestions.json",
      "記憶庫": "jules_memory_bank.json（本檔案）"
    },
    
    "file_structure": {
      "協作腳本": "little_j_jules_container_collaboration.py",
      "容器檢查": "check_container_status.py",
      "標準檢查": "check_standard_containers.py",
      "任務建立": "create_container_management_task_for_jules.py",
      "JULES執行器": "auto_jules_task_executor.py",
      "啟動腳本": "start_container_collaboration_hourly.bat"
    }
  },
  
  "working_procedures": {
    "title": "工作程序（每次工作前必須讀取）",
    
    "地端小j工作流程": [
      "1. 讀取記憶庫（jules_memory_bank.json）",
      "2. 檢查容器狀態（docker ps -a）",
      "3. 進行工作討論（呼叫 Ollama LLM）",
      "4. 提取優化建議",
      "5. 執行安全的優化（風險低、可立即執行）",
      "6. 偵測問題",
      "7. 建立 JULES 任務（包含討論結果）",
      "8. 記錄協作日誌",
      "9. 驗證之前的修復結果"
    ],
    
    "雲端小j工作流程": [
      "1. 讀取記憶庫（了解夥伴關係和系統架構）",
      "2. 檢查 Google Tasks 中的新任務",
      "3. 解析任務內容和建議操作",
      "4. 執行修復操作",
      "5. 回報執行結果到任務備註",
      "6. 標記任務為完成"
    ],
    
    "共同編寫記憶庫": {
      "時機": [
        "系統架構變更時",
        "新增容器時",
        "協作流程調整時",
        "發現重要資訊時"
      ],
      "方式": [
        "地端小 j 或 JULES 提出更新",
        "雙方確認後更新記憶庫",
        "記錄更新時間和貢獻者"
      ]
    }
  },
  
  "important_notes": {
    "安全原則": [
      "重大變更需要人工確認",
      "只有低風險操作可以自動執行",
      "所有操作都記錄在日誌中",
      "定期檢查協作狀態"
    ],
    "溝通原則": [
      "地端小 j 負責主動監控和發現問題",
      "JULES 負責執行和回報結果",
      "所有重要資訊都記錄在記憶庫中",
      "每次工作前必須讀取記憶庫"
    ],
    "優化原則": [
      "持續監控系統狀態",
      "及時發現和處理問題",
      "記錄優化建議並執行安全操作",
      "定期檢討協作效果"
    ]
  },
  
  "community_info": {
    "title": "五常社區發展協會轄區資訊",
    "organization": "新北市三重區五常社區發展協會",
    "last_updated": "2026-01-21T00:00:00",
    "geographic_boundary": {
      "description": "五常社區發展協會服務轄區包含三個里",
      "boundary_file": "wuchang_community_boundary.geojson",
      "covered_areas": [
        {
          "name": "五常里",
          "admin_level": 9,
          "description": "五常社區發展協會主要服務區域之一"
        },
        {
          "name": "五順里",
          "admin_level": 9,
          "description": "五常社區發展協會主要服務區域之一"
        },
        {
          "name": "仁忠里",
          "admin_level": 9,
          "description": "五常社區發展協會主要服務區域之一"
        }
      ],
      "coordinate_reference": {
        "system": "WGS84",
        "format": "[經度, 緯度]",
        "center_approximate": {
          "longitude": 121.497,
          "latitude": 25.079
        }
      }
    },
    "notes": "此地理資訊用於社區服務範圍界定、活動規劃、以及系統服務區域識別"
  }
}
