# 最終合規查核報告

**查核日期**：2026-01-15  
**查核範圍**：加密儲存系統與個資處理功能啟用後的完整合規狀態  
**查核基準**：Google for Nonprofits 規範

---

## 📊 執行摘要

### 合規狀態總覽

| 項目 | 狀態 | 說明 |
|------|------|------|
| Google for Nonprofits 驗證 | ✅ 已完成 | 協會已完成驗證（永久事實） |
| 基本隱私保護 | ✅ 合規 | 除法律規範及政府公示外無個資 |
| 個資處理授權機制 | ✅ 合規 | 已建立明確授權機制 |
| 加密儲存機制 | ✅ 合規 | 個資加密儲存於外接裝置 |
| 設備辨識與記錄 | ✅ 合規 | 設備辨識與變動記錄完整 |
| 硬編碼記錄安全性 | ⚠️ 需注意 | 需確保檔案不在公開版本控制系統中 |
| 個資功能啟用控制 | ✅ 合規 | 需明確設定環境變數啟用 |

---

## 一、個資處理功能啟用狀態

### 1.1 啟用機制

✅ **已實施**：
- 個資處理功能預設為**未啟用**狀態
- 需明確設定 `WUCHANG_PII_ENABLED=true` 才能啟用
- 符合「選擇加入」（opt-in）原則

### 1.2 啟用條件

✅ **合規要求**：
- 必須設定環境變數 `WUCHANG_PII_ENABLED=true`
- 必須註冊外接儲存裝置
- 必須授予可究責自然人個資使用授權
- 必須產生加密金鑰

### 1.3 未啟用狀態

✅ **合規**：
- 未啟用時，所有個資相關 API 返回空資料或提示未啟用
- 符合「無個資」合規聲明

---

## 二、加密儲存機制

### 2.1 加密標準

✅ **符合規範**：
- 使用 **Fernet 對稱加密**（AES 128 位元）
- 使用 **PBKDF2** 金鑰衍生函數（100,000 次迭代）
- 符合現代加密標準

### 2.2 金鑰管理

✅ **安全設計**：
- 金鑰僅存在記憶體中，不寫入檔案
- 金鑰雜湊值記錄在設備註冊表中（用於驗證）
- 每個設備有獨立的加密金鑰

⚠️ **需注意**：
- 重啟後需重新產生金鑰（或使用密碼）
- 建議實施金鑰備份機制（加密備份）

### 2.3 儲存位置

✅ **合規設計**：
- 個資加密後儲存於**外接儲存裝置**
- 不儲存在系統硬碟或版本控制系統中
- 符合「資料分離」原則

---

## 三、設備辨識與變動記錄

### 3.1 設備辨識

✅ **已實施**：
- 自動偵測外接儲存裝置（Windows/Linux）
- 設備註冊表記錄設備資訊（硬編碼）
- 設備 ID 用於識別和追蹤

### 3.2 變動記錄（硬編碼）

✅ **完整記錄**：
- 所有變動記錄在 `storage_change_log.jsonl`（硬編碼）
- 包含時間戳、變動類型、設備 ID、操作者、詳細資訊
- 每個記錄都有 SHA-256 雜湊值用於驗證

### 3.3 記錄類型

✅ **涵蓋範圍**：
- `device_added`：裝置新增
- `device_removed`：裝置移除
- `data_encrypted`：資料加密
- `data_decrypted`：資料解密
- `data_saved_to_device`：資料儲存到裝置
- `data_loaded_from_device`：從裝置載入資料
- `key_rotated`：金鑰輪換

---

## 四、個資處理授權機制

### 4.1 授權要求

✅ **已實施**：
- 個資使用前必須檢查授權
- 授權記錄包含授權範圍、授權用途、授權時間
- 支援授權撤銷

### 4.2 授權檢查

✅ **合規設計**：
- 每次個資存取都檢查授權
- 未授權時返回 `PermissionError`
- 授權記錄儲存在 `accountable_person_authorizations.json`（硬編碼）

### 4.3 授權範圍

✅ **明確定義**：
- `hardcode_record`：記錄於系統硬編碼
- `system_audit`：系統稽核記錄
- `compliance_report`：合規報告
- `system_management`：系統管理
- `responsibility_tracking`：責任追蹤

---

## 五、Google for Nonprofits 規範對照

### 5.1 資料保護標準

| Google 要求 | 系統實作 | 合規狀態 |
|------------|---------|---------|
| 資料加密 | Fernet 對稱加密 | ✅ 合規 |
| 存取控制 | 授權機制 + 環境變數控制 | ✅ 合規 |
| 資料分離 | 外接儲存裝置 | ✅ 合規 |
| 稽核記錄 | 變動記錄（硬編碼） | ✅ 合規 |
| 最小必要原則 | 授權範圍明確 | ✅ 合規 |

### 5.2 隱私保護原則

✅ **符合項目**：
- 除法律規範及政府公示外無個資（預設狀態）
- 個資處理需明確授權
- 個資加密儲存
- 除姓名外其餘不得公開揭露
- 變動記錄完整

### 5.3 資料安全控制

✅ **符合項目**：
- 加密儲存
- 設備辨識
- 變動記錄
- 授權機制

⚠️ **需注意項目**：
- 硬編碼記錄檔案需確保不在公開版本控制系統中
- 加密金鑰需實施備份機制

---

## 六、合規缺口分析

### 6.1 已解決的缺口

✅ **已解決**：
1. **可究責自然人資訊處理**：
   - ✅ 已建立授權機制
   - ✅ 授權記錄完整
   - ✅ 符合「明確同意」原則

2. **永久授權讀取操作**：
   - ✅ 系統感知功能不涉及個資
   - ✅ 符合「最小必要原則」

### 6.2 仍需注意的事項

⚠️ **需注意**：

1. **硬編碼記錄檔案安全性**：
   - ⚠️ `device_registry.json`：設備註冊表（硬編碼）
   - ⚠️ `storage_change_log.jsonl`：變動記錄（硬編碼）
   - ⚠️ `accountable_person_authorizations.json`：授權記錄（硬編碼）
   - **建議**：
     - 將這些檔案加入 `.gitignore`
     - 實施嚴格的檔案存取權限控制
     - 考慮使用加密儲存這些檔案

2. **加密金鑰管理**：
   - ⚠️ 金鑰僅存在記憶體中，重啟後需重新產生
   - **建議**：
     - 實施金鑰備份機制（加密備份）
     - 考慮使用密碼保護的金鑰儲存

3. **外接裝置安全性**：
   - ⚠️ 外接裝置需確保物理安全
   - **建議**：
     - 實施裝置存取控制
     - 定期檢查裝置完整性

---

## 七、合規改進建議

### 7.1 高優先級

1. **檔案安全性**：
   ```bash
   # 將硬編碼記錄檔案加入 .gitignore
   echo "device_registry.json" >> .gitignore
   echo "storage_change_log.jsonl" >> .gitignore
   echo "accountable_person_authorizations.json" >> .gitignore
   ```

2. **檔案存取權限**：
   ```powershell
   # Windows: 設定檔案存取權限
   icacls device_registry.json /grant "Administrators:F" /deny "Users:R"
   ```

### 7.2 中優先級

3. **金鑰備份機制**：
   - 實施加密金鑰備份
   - 使用密碼保護的備份檔案

4. **裝置完整性檢查**：
   - 定期檢查外接裝置完整性
   - 實施裝置存取日誌

### 7.3 低優先級

5. **文件完善**：
   - 更新操作手冊
   - 建立應急處理流程

---

## 八、合規檢查清單

### 8.1 基本要求

- [x] Google for Nonprofits 驗證已完成
- [x] 基本隱私保護符合規範
- [x] 個資處理功能可控制啟用/停用
- [x] 個資處理需明確授權
- [x] 個資加密儲存
- [x] 設備辨識與記錄完整
- [x] 變動記錄完整

### 8.2 安全要求

- [x] 加密標準符合規範
- [x] 金鑰管理安全
- [x] 資料分離（外接裝置）
- [x] 授權機制完整
- [ ] 硬編碼記錄檔案不在公開版本控制系統中（需確認）
- [ ] 檔案存取權限控制（需實施）

### 8.3 合規要求

- [x] 除法律規範及政府公示外無個資（預設）
- [x] 可究責自然人個資使用需授權
- [x] 除姓名外其餘不得公開揭露
- [x] 變動記錄完整（硬編碼）
- [x] 符合最小必要原則

---

## 九、結論

### 9.1 整體合規狀態

**合規狀態**：**基本合規，有需注意事項**

✅ **已符合**：
- Google for Nonprofits 驗證
- 基本隱私保護
- 個資處理授權機制
- 加密儲存機制
- 設備辨識與變動記錄

⚠️ **需注意**：
- 硬編碼記錄檔案安全性
- 加密金鑰備份機制
- 外接裝置物理安全

### 9.2 關鍵改進

1. **立即行動**：
   - 將硬編碼記錄檔案加入 `.gitignore`
   - 實施檔案存取權限控制

2. **短期改進**：
   - 實施加密金鑰備份機制
   - 建立裝置完整性檢查流程

3. **長期維護**：
   - 定期合規審查
   - 持續監控 Google 政策變更

---

## 十、合規聲明更新

### 10.1 更新後的合規聲明

1. **本系統除法律規範須依法揭露及政府公示資訊中公開揭露之外無可供識別之個資，應屬合規**（預設狀態）
2. **本系統可究責之自然人不在隱私權保護規範內**
3. **本系統及AI程序設計之可究責自然人不在隱私權保護規範內**
4. **本系統經授權之獨立管理權限自然人不在隱私權保護規範內**
5. **此兩種自然人除姓名外其餘不得公開揭露，但須紀錄於本系統之硬編碼**
6. **個資使用需獲得明確授權**
7. **個資處理功能需明確啟用（WUCHANG_PII_ENABLED=true）**
8. **個資加密儲存於外接儲存裝置**
9. **設備辨識與變動記錄完整（硬編碼）**

### 10.2 合規保證

✅ **合規保證機制**：
- 預設狀態：個資處理功能未啟用，符合「無個資」聲明
- 啟用狀態：個資處理需明確授權，加密儲存，完整記錄
- 符合 Google for Nonprofits 規範要求

---

**報告生成日期**：2026-01-15  
**下次審查建議日期**：2026-04-15（每季度審查）  
**合規狀態**：基本合規，有需注意事項
