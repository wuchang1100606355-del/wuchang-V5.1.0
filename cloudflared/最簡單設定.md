# Cloudflare Tunnel 最簡單設定（完全命令列，不需要網頁）

**完全不需要任何網頁操作，全部在命令列完成**

---

## 🚀 三步驟完成

### 步驟 1：取得 Tunnel ID（5分鐘）

**在 PowerShell 中執行以下命令**：

```powershell
# 1. 進入容器
docker exec -it wuchangv510-cloudflared-1 sh

# 2. 登入（會自動開啟瀏覽器，您只需要點擊「Authorize」按鈕）
cloudflared tunnel login

# 3. 建立 Tunnel（這會顯示 Tunnel ID）
cloudflared tunnel create wuchang-life
```

**會發生什麼**：
- 第 2 步會自動開啟瀏覽器
- 瀏覽器會顯示一個頁面，您只需要點擊「Authorize」或「授權」按鈕
- 點擊後，瀏覽器會顯示「Success」，您可以關閉瀏覽器
- 回到命令列，會顯示類似：`Created tunnel wuchang-life with id abc123def456789...`

**重要**：複製這個 `id`（Tunnel ID），例如：`abc123def4567890123456789012345678`

**完成後**：輸入 `exit` 退出容器

---

### 步驟 2：修改 config.yml（1分鐘）

**用文字編輯器打開**：`cloudflared/config.yml`

**找到這一行**：
```yaml
tunnel: <tunnel-id>
```

**改為**（使用步驟 1 取得的 Tunnel ID）：
```yaml
tunnel: abc123def4567890123456789012345678
```

**儲存檔案**

---

### 步驟 3：複製檔案並重啟（1分鐘）

**在 PowerShell 中執行**：

```powershell
# 複製檔案到容器
docker cp cloudflared/config.yml wuchangv510-cloudflared-1:/etc/cloudflared/config.yml

# 重啟容器
docker restart wuchangv510-cloudflared-1

# 檢查是否成功（應該看到 "Connection established"）
docker logs wuchangv510-cloudflared-1
```

---

## ✅ 完成！取得 Tunnel ID

**現在您已經有 Tunnel ID 了**，例如：`abc123def4567890123456789012345678`

**下一步**：在 Squarespace 設定 DNS

---

## 📋 Squarespace DNS 設定（最簡單說明）

**設定位置**：https://account.squarespace.com/domains/managed/wuchang.life/dns/dns-settings

**您需要修改 3 筆記錄**：

### 記錄 1：根域名（@）第一個

**找到**：表格中 `Host` 是 `@`，`Data` 是 `35.185.167.23` 的那一行

**操作**：
1. 點擊那一行右邊的「編輯」按鈕
2. 在彈出的視窗中：
   - `Type` 欄位：選擇 `CNAME`
   - `Data` 欄位：改為 `<您的Tunnel ID>.cfargotunnel.com`
   - 例如：`abc123def4567890123456789012345678.cfargotunnel.com`
3. 點擊「儲存」

---

### 記錄 2：根域名（@）第二個

**找到**：表格中 `Host` 是 `@`，`Data` 是 `220.135.21.74` 的那一行

**操作**：
1. 點擊那一行右邊的「刪除」按鈕
2. 確認刪除

---

### 記錄 3：WWW 子域名

**找到**：表格中 `Host` 是 `www`，`Data` 是 `220.135.21.74` 的那一行

**操作**：
1. 點擊那一行右邊的「編輯」按鈕
2. 在彈出的視窗中：
   - `Type` 欄位：選擇 `CNAME`
   - `Data` 欄位：改為 `<您的Tunnel ID>.cfargotunnel.com`
   - 例如：`abc123def4567890123456789012345678.cfargotunnel.com`
3. 點擊「儲存」

---

## 🎯 完整流程總結

1. **命令列取得 Tunnel ID**（不需要任何網頁）
2. **編輯一個檔案**（config.yml）
3. **複製檔案並重啟容器**（命令列）
4. **在 Squarespace 設定 DNS**（只需要點擊編輯、修改、儲存）

**完全不需要**：
- ❌ Cloudflare Dashboard
- ❌ 英文介面
- ❌ 複雜操作

---

## ❓ 如果遇到問題

### 問題：忘記 Tunnel ID

**解決**：執行以下命令查看
```powershell
docker exec -it wuchangv510-cloudflared-1 sh
cloudflared tunnel list
exit
```

### 問題：Squarespace 介面看不懂

**解決**：可以請 ChatGPT 協助，或參考 `SQUARESPACE_DNS_CHANGES.md`

---

**總時間**：約 10 分鐘  
**難度**：簡單（只需複製貼上命令）
