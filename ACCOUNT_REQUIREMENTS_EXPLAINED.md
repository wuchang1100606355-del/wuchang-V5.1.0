# 帳號需求說明

## 問題：什麼帳號需要相同？

### 答案：**Windows 使用者帳號**

如果本地和伺服器使用**相同的 Windows 使用者帳號**，網路共享會更容易。

## 不同層面的帳號需求

### 1. **Windows 使用者帳號**（網路共享用）

**用途：**
- 訪問網路共享資料夾（SMB）
- 映射網路磁碟機
- 檔案同步

**如果相同：**
- ✅ 可以直接訪問共享，無需輸入密碼
- ✅ 權限設定更簡單
- ✅ 檔案同步更順暢

**如果不同：**
- ⚠️ 需要提供帳號密碼
- ⚠️ 需要設定共享權限
- ⚠️ 可能需要每次輸入認證資訊

### 2. **Docker 容器帳號**（容器運行用）

**用途：**
- 容器內部的使用者
- 容器間通信

**不需要相同：**
- 容器有自己的內部使用者
- 容器間通過網路通信，不依賴 Windows 帳號

### 3. **Google 帳號**（Google Tasks API 用）

**用途：**
- Google Tasks API 認證
- OAuth 授權

**不需要相同：**
- 每個系統可以有自己的 Google 帳號
- 通過 OAuth 憑證認證

### 4. **系統管理員帳號**（系統管理用）

**用途：**
- 系統管理權限
- full_agent 權限

**不需要相同：**
- 每個系統可以有自己的管理員
- 通過授權機制管理

## 實際情況

### 網路共享（SMB）

如果伺服器和本地使用**相同的 Windows 使用者名稱和密碼**：

```powershell
# 可以直接映射，無需輸入密碼
net use Z: \\HOME-COMMPUT\wuchang V5.1.0 /persistent:yes
```

如果不同：

```powershell
# 需要提供認證資訊
net use Z: \\HOME-COMMPUT\wuchang V5.1.0 /user:帳號 密碼 /persistent:yes
```

### 容器網路

**不需要相同的 Windows 帳號**，因為：
- 容器通過 Docker 網路通信
- 使用 VPN IP 地址訪問（10.8.0.1, 10.8.0.6）
- 容器有自己的網路命名空間

## 建議配置

### 最佳情況（相同 Windows 帳號）

```
本地 Windows 帳號: User
伺服器 Windows 帳號: User（相同）
密碼: 相同或已設定信任關係

優點：
- 網路共享無需認證
- 檔案同步更順暢
- 權限管理更簡單
```

### 可行情況（不同 Windows 帳號）

```
本地 Windows 帳號: User1
伺服器 Windows 帳號: User2（不同）

需要：
- 在伺服器上建立 User1 帳號，或
- 使用共享帳號（如 guest 或專門的同步帳號）
- 設定共享權限
- 每次映射時提供認證資訊
```

## 當前配置檢查

根據 `network_interconnection_config.json`：

```json
{
  "server_share": "\\\\HOME-COMMPUT\\wuchang V5.1.0",
  "local_ip": "10.8.0.6",
  "server_ip": "10.8.0.1"
}
```

**建議檢查：**
1. 本地 Windows 使用者名稱：`whoami`
2. 伺服器 Windows 使用者名稱：需要確認
3. 如果不同，需要設定共享認證

## 總結

- **Windows 帳號相同**：網路共享更方便（可選，但建議）
- **Docker 容器**：不需要相同帳號
- **Google 帳號**：不需要相同
- **VPN 網路**：不需要相同帳號，只需要網路互通

**最重要的是：VPN 網路互通（10.8.0.0/24），這樣容器就可以互相訪問。**
